<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8"/>
<title>Monitoreo Cruz Roja Hermosillo</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css"/>
<script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>

<style>
body { margin:0; font-family: Arial, sans-serif; background:#0b0f14; }
#map { height:100vh; }

/* PANEL C5 */
.header-panel {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    padding: 12px 30px;
    border-radius: 50px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.2);
    z-index: 1000;
    text-align: center;
    border-top: 5px solid #c40000;
    min-width: 280px;
    pointer-events: none; /* Permite hacer clic a trav√©s del panel al mapa */
  }

  .header-panel h3 { margin: 0; color: #c40000; font-size: 1.1rem; }
  .header-panel p { margin: 2px 0 0 0; font-size: 0.85rem; color: #555; }
  .status-dot { height: 10px; width: 10px; background: #2ecc71; border-radius: 50%; display: inline-block; margin-right: 5px; }

  /* Ajuste para que el control de capas se vea bien */
  .leaflet-top.leaflet-right { top: 10px; }
</style>
</head>
<body>

<div class="header-panel">
  <h3>CRUZ ROJA MEXICANA</h3>
  <p><span class="status-dot"></span>Centro de Despacho | Sistema Operativo</p>
</div>

<div id="map"></div>

<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

.estado {
  padding:6px 10px;
  border-radius:6px;
  margin-top:6px;
  font-size:13px;
}

.disponible { background:#1f8b4c; }
.saturado { background:#b32020; }
.proceso { background:#b38b1f; }

</style>
</head>
<body>

<script>

// ================= MAPA BASE =================
var map = L.map('map').setView([29.09, -110.96], 12);

L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
  attribution:'¬© OpenStreetMap'
}).addTo(map);

// ================= ICONOS =================

// hospital semaforizado
function iconoHospital(color){
  return L.divIcon({
    html:`<div style="
      width:22px;height:22px;
      background:${color};
      border:3px solid white;
      border-radius:6px;
      box-shadow:0 0 6px rgba(0,0,0,0.6);
    "></div>`,
    className:"",
    iconSize:[22,22]
  });
}

// ambulancia
var iconoAmbulancia = L.divIcon({
  html:`<div style="
    font-size:20px;
  ">üöë</div>`,
  className:"",
  iconSize:[20,20]
});

// ================= HOSPITALES =================
var hospitales = [
["Hospital General de Especialidades","Disponible", 29.08149, -111.00376],
["IMSS HGZ 14","Saturado", 29.09878, -111.00153],
["IMSS HGZ 02","Saturado", 29.10370, -110.95337],
["IMSS HGZ 15","Disponible", 29.08649, -110.96219],
["Centro M√©dico del Noroeste","Disponible", 29.08141, -110.95062],
["Hospital CIMA","Disponible", 29.06470, -110.96136],
["Hospital San Jos√©","Disponible", 29.12069, -110.95190],
["ISSSTE Dr. Fernando Ocaranza","Disponible", 29.11015, -110.95071],
["SSA Hospital de la Mujer","Disponible", 29.11594, -110.97256],
["Hospital Militar Regional","Disponible", 29.11487, -110.94862],
["ISSSTESON Dr. Ignacio Chavez","Disponible", 29.09679, -110.95348],
["Hospital San Diego de Alcala","Disponible", 29.08964, -110.95214],
["Hospital Licona","Disponible", 29.08144, -110.94933],
["SSA Hospital Infantil","Disponible", 29.11639, -110.97176]
];

hospitales.forEach(h=>{
  let color =
    h[1]=="disponible" ? "#22c55e" :
    h[1]=="saturado" ? "#ef4444" :
    "#facc15";

  L.marker([h[2],h[3]],{icon:iconoHospital(color)})
    .addTo(map)
    .bindPopup(`<b>${h[0]}</b><br>Estado: ${h[1]}`);
});

// ================= AMBULANCIAS =================
var ambulancias = [
["SON-526",29.09,-110.97],
["SON-528",29.07,-110.95],
["SON-529",29.11,-110.98]
];

ambulancias.forEach(a=>{
  L.marker([a[1],a[2]],{icon:iconoAmbulancia})
    .addTo(map)
    .bindPopup(`<b>Ambulancia ${a[0]}</b>`);
});

// ================= TR√ÅFICO (visual) =================
L.tileLayer(
 "https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",
 {opacity:0.4}
).addTo(map);

// ================= CLIMA (requiere API) =================
// reemplaza TU_API_KEY
/*
L.tileLayer(
 "https://tile.openweathermap.org/map/precipitation_new/{z}/{x}/{y}.png?appid=TU_API_KEY",
 {opacity:0.5}
).addTo(map);
*/

</script>
</body>
</html>
